---
interface Props {
  title: string;
  subtitle?: string;
  ctaText?: string;
  ctaLink?: string;
  backgroundImage?: string;
  compact?: boolean;
}

const {
  title,
  subtitle,
  ctaText = "Get a Free Quote",
  ctaLink = "/contact",
  backgroundImage,
  compact = false
} = Astro.props;

// Derive mobile image path (e.g., /images/hero-garage.webp -> /images/hero-garage-640w.webp)
const mobileImage = backgroundImage?.replace('.webp', '-640w.webp');
---

<section class:list={["relative overflow-hidden", compact ? "py-16 md:py-24" : "py-24 md:py-40"]}>
  <!-- Background image -->
  {backgroundImage ? (
    <div class="absolute inset-0">
      <img
        src={backgroundImage}
        srcset={`${mobileImage} 640w, ${backgroundImage} 1024w`}
        sizes="100vw"
        alt=""
        role="presentation"
        class="absolute inset-0 w-full h-full object-cover"
        width="1024"
        height="1024"
        fetchpriority="high"
        decoding="async"
      />
      <div class="absolute inset-0 bg-primary/80"></div>
    </div>
  ) : (
    <div class="absolute inset-0 topo-bg"></div>
  )}

  <!-- Diagonal stripe accent at bottom -->
  <div class="absolute bottom-0 left-0 right-0 h-2 stripe-accent z-10"></div>

  <!-- Content -->
  <div class="relative z-10 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="max-w-3xl">
      <div class="w-16 h-1 bg-accent mb-6 animate-fade-up"></div>
      <h1 class:list={[
        "font-heading font-bold text-white leading-tight mb-6 animate-fade-up delay-100",
        compact ? "text-3xl md:text-5xl" : "text-4xl md:text-6xl lg:text-7xl"
      ]}>
        {title}
      </h1>
      {subtitle && (
        <p class:list={[
          "text-white/70 max-w-2xl mb-8 animate-fade-up delay-200 font-light",
          compact ? "text-lg" : "text-xl md:text-2xl"
        ]}>
          {subtitle}
        </p>
      )}
      {ctaText && (
        <div class="animate-fade-up delay-300 flex flex-wrap gap-4">
          <a
            href={ctaLink}
            class="inline-block bg-accent hover:bg-accent-dark text-primary px-8 py-4 font-heading font-bold text-sm uppercase tracking-wider transition-colors skew-x-[-4deg]"
          >
            <span class="skew-x-[4deg] inline-flex items-center gap-2">
              <i class="fa-solid fa-arrow-right"></i>
              {ctaText}
            </span>
          </a>
          <a
            href="tel:3218319421"
            class="inline-block border-2 border-white/30 hover:border-accent text-white px-8 py-4 font-heading font-bold text-sm uppercase tracking-wider transition-colors skew-x-[-4deg]"
          >
            <span class="skew-x-[4deg] inline-flex items-center gap-2">
              <i class="fa-solid fa-phone"></i>
              (321) 831-9421
            </span>
          </a>
        </div>
      )}
    </div>
  </div>
</section>
